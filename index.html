<!DOCTYPE html>
<html lang="en" dir="ltr">
<!--**TEST SITE**-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/PPSOLB/style.css">
	
	<script>
  (function() {
    // Universal Analytics tracking ID whose _ga cookie to use.
    // If using GA4, you can leave this setting untouched.
    var trackingId = 'UA-XXXXX-Y';
    
    // Maximum time in milliseconds to wait for GA tracker to load.
    // Again, irrelevant for GA4.
    var maxGATime = 2000;
    
    // Set to the origin ("https://www.domain.com") of the iframe you want to communicate with
    var childOrigin = 'https://ob.rushcliff.com';
    
    // Don't touch anything that follows
    var pollInterval = 200;
    
    var postCallback = function(event) {
      if (event.origin !== childOrigin) return;
      if (event.data !== 'childReady' && !event.data.event) return;
      
      if (event.data === 'childReady') {
        // Send event that parent is ready
        event.source.postMessage('parentReady', event.origin);

        var pollCallback = function() {
          // Stop polling if maxTime reached
          maxGATime -= pollInterval;
          if (maxGATime <= 0) window.clearInterval(poll);
          
          // Only proceed if GA loaded and tracker accessible
          var ga = window[window['GoogleAnalyticsObject']];
          if (ga && ga.getAll) {
            // Get tracker that matches the Tracking ID you provided
            var tracker = ga.getAll().filter(function(t) { 
              return t.get('trackingId') === trackingId; 
            }).shift();
            
            // Send message back to frame with Client ID
            if (tracker) {
              event.source.postMessage({
                event: 'clientId',
                clientId: tracker.get('clientId')
              }, event.origin);
            }
            // Stop polling if not already done so
            window.clearInterval(poll);
          }
        };
        
        // Start polling for Google Analytics tracker
        var poll = window.setInterval(pollCallback, pollInterval)
      }
      
      // Push dataLayer message from iframe to dataLayer of parent
      if (event.data.event) {
        window.dataLayer.push(event.data);
      }
    };
    
    // Start listening for messages from child frame
    window.addEventListener('message', postCallback);
  })();
</script>

</head>
<body>
	
	
	<div id="topSection">
		<h1 class="h1Main"> Online Booking </h1>
    		<hr class="hrCust">
    		<ul class="navBar">
    		<a href="/PPSOLB/index.html" class="aOlbCust">
    		<li> Home Page </li>
    		</a></li>
    		</a></li>
   		 </ul>
    		<hr class="hrCust">
    	<h2 class="h2Cust"> Please complete your booking below</h2>
  </div>
  
	<div id="midSection">
    		<div id="ob-container">
    	</div>
	</div>

</body>

<footer>
	
	<script type="text/javascript">
	function ppsOnlineBooking() {
		new OnlineBooking({
			container: "ob-container", id: 222222
		});
	}
	(function() {
		var xhr = new XMLHttpRequest();
		xhr.open("GET", "https://ob.rushcliff.com/status-check", true);
		xhr.onreadystatechange = function() {
			if(xhr.readyState == 4) {
				if(xhr.status == 200 && xhr.responseText == "live") {
					var script = document.createElement("script");
					script.src = "https://ob.rushcliff.com/js/obv4.js";
					document.head.appendChild(script);
				} else {
					document.getElementById("ob-container").innerHTML = "<p>Our online booking service is currently unavailable. Please call, email or try again later.</p>";
				}
			}
		}
		xhr.send();
	})();
	</script>
	
	
 <!--<script type="text/javascript">
	function ppsOnlineBooking() {
		new OnlineBooking({
			container: "ob-container", 
			id: 222222,
			event_booking: "on"
		});
	}
	(function() {
		var xhr = new XMLHttpRequest();
		xhr.open("GET", "https://new-ob.rushcliff.com/status-check", true);
		xhr.onreadystatechange = function() {
			if(xhr.readyState == 4) {
				if(xhr.status == 200 && xhr.responseText == "live") {
					var script = document.createElement("script");
					script.src = "https://new-ob.rushcliff.com/js/obv4.js";
					document.head.appendChild(script);
				} else {
					document.getElementById("ob-container").innerHTML = "<p>Our online booking service is currently unavailable. Please call, email or try again later.</p>";
				}
			}
		}
		xhr.send();
	})();
</script> -->
</footer>

</html>
